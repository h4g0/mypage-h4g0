(this["webpackJsonpbackoffice-middleware"]=this["webpackJsonpbackoffice-middleware"]||[]).push([[0],{10:function(e,n,t){},27:function(e,n,t){},29:function(e,n,t){},57:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(6),o=t.n(a),s=(t(27),t(3)),i=t.n(s),u=t(4),l=(t(29),t(8));t(47).config();var d="https://mdw.ambar.pt/API";function p(e,n){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(i.a.mark((function e(n,t){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",r="",c={method:"get",url:d+"/gettoken?id="+n+"&password="+t,headers:{},data:""},e.next=5,l(c).then((function(e){r=e.data.token})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("mdw server "+d);var b=t(2),f="LOGIN",h="PASSWORD",m="PASSWORD2",O="USER",x="EMAIL",v="MENU",g="LOGOUT",w="ORDERS",y="INDEX",k="PAGESIZE",N=function(e){return{type:h,payload:e}},C=function(e){return{type:O,payload:e}},A=function(e){return{type:v,payload:e}},L={Login:"Login",CreateAccount:"CreateAccount",Workplace:"Workplace"},S=t(0);var R=function(e){var n=Object(b.b)(),t=Object(b.c)((function(e){return e.token})),r=Object(b.c)((function(e){return e.user})),c=Object(b.c)((function(e){return e.password})),a=Object(b.c)((function(e){return e.menu}));if(""!=t&&n(A({menu:L.Workplace})),a!==L.Login)return null;var o=function(){var e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(r,c);case 3:a=e.sent,console.log(a),n({type:f,payload:{token:a}}),console.log(t),console.log(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"login-div-external",children:[Object(S.jsx)("h1",{className:"login-message",children:" Login backoffice "}),Object(S.jsxs)("div",{className:"login-div-internal",children:[Object(S.jsx)("input",{type:"username",className:"login-username",placeholder:"Username",onChange:function(e){var t=e.target.value;n(C({user:t}))}}),Object(S.jsx)("input",{type:"password",className:"login-password",placeholder:"Password",onChange:function(e){var t=e.target.value;n(N({password:t}))}}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{className:"login-new-account",onClick:function(){n(A({menu:L.CreateAccount}))},children:" Request new account "}),Object(S.jsx)("button",{className:"login-login-button",onClick:o,children:" Login "})]})]})]})},P=(t(57),t(8));function E(e,n,t,r){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(i.a.mark((function e(n,t,r,c){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"post",url:"https://mdw.ambar.pt/API/requestaccount?id="+n+"&password="+r+"&email="+t,headers:{Authorization:"Bearer "+c}},e.next=3,P(a).then((function(e){console.log(JSON.stringify(e.data))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(e){var n=Object(b.b)(),t=Object(b.c)((function(e){return e.token})),r=Object(b.c)((function(e){return e.user})),c=Object(b.c)((function(e){return e.email})),a=Object(b.c)((function(e){return e.password})),o=Object(b.c)((function(e){return e.password2}));if(Object(b.c)((function(e){return e.menu}))!==L.CreateAccount)return null;var s=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a==o){e.next=3;break}throw new Error("Passwords don't match");case 3:return e.next=5,E(r,c,a,t);case 5:n(A({menu:L.Login})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"account-div-external",children:[Object(S.jsx)("h1",{className:"account-message",children:" Request new account "}),Object(S.jsx)("button",{className:"account-return-login-menu",onClick:function(){n(A({menu:L.Login}))},children:" Return to main menu "}),Object(S.jsxs)("div",{className:"account-div-internal",children:[Object(S.jsx)("input",{type:"username",className:"account-username",placeholder:"Username",onChange:function(e){var t=e.target.value;n(C({user:t}))}}),Object(S.jsx)("input",{type:"email",className:"account-email",placeholder:"Email",onChange:function(e){var t=e.target.value;n({type:x,payload:{email:t}})}}),Object(S.jsx)("input",{type:"password",className:"account-password",placeholder:"Password",onChange:function(e){var t=e.target.value;n(N({password:t}))}}),Object(S.jsx)("input",{type:"password",className:"account-password2",placeholder:"Repeat password",onChange:function(e){var t=e.target.value;n({type:m,payload:{password2:t}})}}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{className:"account-login-button",onClick:s,children:" Request new account "})})]})]})},_=t(22),B=t(12),F={user:"",password:"",password2:"",menu:L.Login,email:"",token:"",orders:[],index:0,pagesize:5},M=Object(_.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0,t=Object(B.a)({},e);switch(n.type){case f:return console.log(n),t.token=n.payload.token,t;case v:return t.menu=n.payload.menu,t;case h:return t.password=n.payload.password,t;case x:return t.email=n.payload.email,t;case O:return t.user=n.payload.user,t;case m:return t.password2=n.payload.password2,t;case w:return t.orders=n.payload.orders,t.index=F.index,t.pagesize=F.pagesize,t;case y:return t.index=Math.max(0,Math.min(n.payload.index,e.orders.length-e.pagesize)),t;case k:return t.pagasize=n.payload.pagesize,t;case g:return Object(B.a)({},F);default:return e}}));t(10);var W=function(e){e.changeOrder;var n=e.order_id,t=e.email,r=e.ammount,c=e.fullfield,a=e.order_number;return Object(S.jsxs)("div",{className:"order",children:[Object(S.jsxs)("div",{className:"order-info",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("b",{children:"Order: "}),n]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("b",{children:"Contact: "}),t]}),Object(S.jsxs)("p",{children:[" ",Object(S.jsx)("b",{children:" Fullfield: "}),String(c)]})]}),Object(S.jsxs)("div",{className:"order-info",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("b",{children:"Ammount: "}),r]}),Object(S.jsxs)("p",{children:[Object(S.jsx)("b",{children:"Order number: "}),a]}),Object(S.jsx)("p",{className:"view-more",children:" View more "})]})]})},q=t(8),D="https://mdw.ambar.pt/API";function U(e){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(i.a.mark((function e(n){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r={method:"get",url:D+"/getordersdb?data=client",headers:{Authorization:"Bearer "+n}},e.next=4,q(r).then((function(e){console.log(JSON.stringify(e.data)),t=e.data})).catch((function(e){console.log(e)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e){var n=Object(b.b)(),t=Object(b.c)((function(e){return e.token})),r=Object(b.c)((function(e){return e.orders})),c=Object(b.c)((function(e){return e.pagesize})),a=Object(b.c)((function(e){return e.index})),o=function(){var e=Object(u.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:r=e.sent,console.log(r),n({type:w,payload:{orders:r}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0==r.length&&o();var s=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:y,payload:{index:a+(t?c:-1*c)}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(r),console.log(c),console.log(a),Object(S.jsxs)("div",{className:"orders",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("input",{type:"text",placeholder:"Find orders",className:"searchOrderInput"}),Object(S.jsx)("button",{className:"searchOrderButton",children:"Search"}),Object(S.jsx)("button",{className:"searchOrderButton",onClickCapture:o,children:"Refresh"})]}),Object(S.jsxs)("div",{children:[r.slice(a,a+c).map((function(e,n){return Object(S.jsx)(W,{order_id:e.order_id,email:e.email,ammount:e.ammount,fullfield:e.fullfield,order_number:e.order_number})})),Object(S.jsxs)("p",{className:"next-page-order",children:[Object(S.jsx)("button",{className:"button-page-order",onClick:d,children:"previous"}),Object(S.jsx)("button",{className:"button-page-order",onClick:l,children:"next"})]})]})]})};var T=function(e){var n=Object(b.b)();return Object(b.c)((function(e){return e.token})),Object(b.c)((function(e){return e.user})),Object(b.c)((function(e){return e.menu}))!==L.Workplace?null:Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"workplace-menu",children:[Object(S.jsxs)("div",{className:"dropdown",children:[Object(S.jsx)("button",{className:"dropbtn",children:" Middleware backoffice "}),Object(S.jsxs)("div",{className:"dropdown-content",children:[Object(S.jsx)("a",{children:"Orders"}),Object(S.jsx)("a",{children:"Review account creation requests"}),Object(S.jsx)("a",{children:"Statistics"})]})]}),Object(S.jsx)(G,{orders:[{order_id:"orderid1223",email:"customer@example.com",ammount:"1000000 $"}]}),Object(S.jsx)("h1",{className:"workplace-logout",onClick:function(){n({type:g,payload:{}})},children:" Logout "})]})})};var V=function(){return Object(S.jsxs)(b.a,{store:M,children:[Object(S.jsx)(R,{}),Object(S.jsx)(z,{}),Object(S.jsx)(T,{})]})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,59)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(V,{})}),document.getElementById("root")),X()}},[[58,1,2]]]);
//# sourceMappingURL=main.7446d3d1.chunk.js.map